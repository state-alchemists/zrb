<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <link rel="stylesheet" href="/static/pico.min.css">
    <link rel="icon" href="/static/favicon-32x32.png" sizes="32x32" type="image/png">
    <title>Zrb</title>
  </head>
  <body>

    <header class="container">
      <hgroup>
        <h1>{root_name}</h1>
        <p>{root_description}</p>
        <nav>
          <ul>
            <li><a href="/">🏠 Home</a></li>
            <li><a href="{parent_url}">🔙 Parent</a></li>
            <li><a href="{ui_url}">🆕 New Session</a></li>
            <li><a href="#" onclick="openDialog(event)">📂 Existing Session</a></li>
          </ul>
        </nav>
      </hgroup>
    </header>

    <dialog id="session-history-dialog">
      <article>
        <header>
          <button aria-label="Close" rel="prev" onclick="closeDialog(event)"></button>
          <p>
            <strong>📂 Existing Session</strong>
          </p>
        </header>
        <main>
          <form>
            <fieldset class="grid">
              <input type="datetime-local" id="min-start-at-input" placeholder="Minimum Start Time" aria-label="Minimum Start Time" />
              <input type="datetime-local" id="max-start-at-input" placeholder="Maximum Start Time" aria-label="Maximum Start Time" />
            </fieldset>
          </form>
          <ul id="session-history-ul" style="font-family:monospace;"></ul>
        </main>
        <footer>
          <nav>
            <ul id="session-history-pagination-ul"></ul>
          </nav>
        </footer>
      </article>
    </dialog>

    <main class="container">
      <h3>{name}</h3>
      <p>{description}</p>
      <canvas id="history-canvas" height="0" width="1000" style="width: 100%;"></canvas>
      <hr />
      <form id="submit-task-form" onsubmit="submitForm(event)">
        {task_inputs}
        <button>🚀 Run</button>
      </form>
      <hr />
      <label>
        Result
        <textarea id="result-textarea" rows="1" readonly style="font-family:monospace;">
        </textarea>
      </label>
      <label>
        Log
        <textarea id="log-textarea" rows="5" readonly style="font-family:monospace;">
        </textarea>
      </label>
    </main>

  </body>
  <script>
    const CURRENT_URL = '{url}';
    const API_URL = '{api_url}';
    const UI_URL = `{ui_url}`;
    let SESSION_NAME = '{session_name}';
    let PAGE = 0;
    {main_script} 
    {common_util_script}
    {show_existing_session_script}
    {visualize_history_script}
  </script>
</html>
