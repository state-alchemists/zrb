[2m
  üß† The[0m[2m user wants me to[0m[2m implement CRUD endpoints for[0m[2m a Todo app.[0m[2m Let me first[0m[2m check[0m[2m the current structure[0m[2m of the project[0m[2m to understand:[0m[2m
     1. What[0m[2m's in `app[0m[2m/main.py`[0m[2m - existing[0m[2m endpoints and[0m[2m patterns
     2.[0m[2m What's in `[0m[2mapp/database.py`[0m[2m - the database[0m[2m interface
     3.[0m[2m What models are defined[0m[2m
     
     This[0m[2m is a straightforward[0m[2m task -[0m[2m implementing[0m[2m 3 CRUD[0m[2m endpoints. This[0m[2m seems[0m[2m like a[0m[2m FAST PATH task ([0m[2mspecific[0m[2m file[0m[2m modifications, clear requirements[0m[2m).[0m[2m
     
     Let me start by[0m[2m reading the relevant files[0m[2m to understand the patterns[0m[2m.[0m[2m
  üß† I[0m[2m'll implement[0m[2m the remaining CRUD endpoints[0m[2m.[0m[2m Let me first examine[0m[2m the existing code structure[0m[2m to[0m[2m understand the patterns.[0m[2m{"path":"/Users/gofrendigunawan/zrb/llm-challenges/experiment/ollama:glm-4.7:cloud/feature/workdir/app/database.py"}[0m[2m
  üß∞ call_hd1u4q4d | ReadRead {"path":"/Users/gofrendigunawan/zrb/llm-challenges/experiment/ollama:glm-4.7:cloud/feature/workdir/app/main.py"}{"path":"/Users/gofrendigunawan/zrb/llm-challenges/experiment/ollama:glm-4.7:cloud/feature/workdir/app/database.py"}
[0m[2m
  üî† call_hd1u4q4d | Return Unknown tool name: 'ReadRead'. Available tools: 'Bash', 'AnalyzeCode', 'LS', 'Glob', 'Read', 'ReadMany', 'Write', 'WriteMany', 'Edit', 'Grep', 'AnalyzeFile', 'SearchInternet', 'OpenWebPage', 'ListZrbTasks', 'RunZrbTask', 'ActivateSkill', 'DelegateToAgent', 'ReadContextualNote', 'ReadLongTermNote', 'WriteContextualNote', 'WriteLongTermNote'
[0m[32m260215 10:02:32.584 1/3   üê∂ chat-process ‚¨§ [0m [1;31m[ERROR] Attempt 1/3 failed: status_code: 400, model_name: glm-4.7:cloud, body: {'message': 'invalid tool call arguments', 'type': 'invalid_request_error', 'param': None, 'code': None}[0m
[2m
  üß† The[0m[2m user wants me to[0m[2m implement CRUD endpoints for[0m[2m a Todo app.[0m[2m Let me first[0m[2m understand the existing[0m[2m code structure[0m[2m by reading the relevant[0m[2m files.
     
     According[0m[2m to the instructions[0m[2m:
     1. I[0m[2m need to implement POST[0m[2m /todos ([0m[2mcreate[0m[2m),[0m[2m PUT /todos/{[0m[2mtodo_id} ([0m[2mupdate), and DELETE[0m[2m /todos/{todo[0m[2m_id} (delete[0m[2m)
     2. The[0m[2m app uses an[0m[2m in-memory database in[0m[2m `app/database.py[0m[2m`
     3. I[0m[2m should follow existing patterns[0m[2m and use correct[0m[2m Pydantic models[0m[2m
     
     Let me start[0m[2m by reading the current[0m[2m code[0m[2m to understand:
     1[0m[2m. The existing[0m[2m structure in `app[0m[2m/main.py`
     2[0m[2m. The database implementation[0m[2m in `app/database[0m[2m.py`
     3.[0m[2m The[0m[2m Pydantic models[0m[2m being used
     
     This[0m[2m is a straightforward[0m[2m task ([0m[2mFAST[0m[2m PATH)[0m[2m - I need[0m[2m to read[0m[2m 2-3 files[0m[2m and implement[0m[2m 3 endpoints. No[0m[2m need[0m[2m to[0m[2m delegate to a sub[0m[2m-agent.[0m[2m
  üß† I[0m[2m'll examine[0m[2m the current[0m[2m code structure and[0m[2m implement the remaining[0m[2m CRUD endpoints.[0m[2m{"path":"/Users/gofrendigunawan/zrb/llm-challenges/experiment/ollama:glm-4.7:cloud/feature/workdir/app/database.py"}[0m[2m
  üß∞ call_k1936cvh | ReadRead {"path":"/Users/gofrendigunawan/zrb/llm-challenges/experiment/ollama:glm-4.7:cloud/feature/workdir/app/main.py"}{"path":"/Users/gofrendigunawan/zrb/llm-challenges/experiment/ollama:glm-4.7:cloud/feature/workdir/app/database.py"}
[0m[2m
  üî† call_k1936cvh | Return Unknown tool name: 'ReadRead'. Available tools: 'Bash', 'AnalyzeCode', 'LS', 'Glob', 'Read', 'ReadMany', 'Write', 'WriteMany', 'Edit', 'Grep', 'AnalyzeFile', 'SearchInternet', 'OpenWebPage', 'ListZrbTasks', 'RunZrbTask', 'ActivateSkill', 'DelegateToAgent', 'ReadContextualNote', 'ReadLongTermNote', 'WriteContextualNote', 'WriteLongTermNote'
[0m[32m260215 10:02:38.298 2/3   üê∂ chat-process ‚¨§ [0m [1;31m[ERROR] Attempt 2/3 failed: status_code: 400, model_name: glm-4.7:cloud, body: {'message': 'invalid tool call arguments', 'type': 'invalid_request_error', 'param': None, 'code': None}[0m
[2m
  üß† The[0m[2m user wants me to[0m[2m implement remaining[0m[2m CRUD endpoints in a[0m[2m Todo app. Let[0m[2m me first[0m[2m understand the current state[0m[2m of the codebase[0m[2m by reading the relevant[0m[2m files.
     
     This[0m[2m is a clear[0m[2m task to[0m[2m implement some[0m[2m REST[0m[2m endpoints. I should[0m[2m:
     1. First[0m[2m read the existing[0m[2m files to understand the[0m[2m patterns[0m[2m
     2. Implement[0m[2m the missing endpoints[0m[2m
     3. Verify the[0m[2m implementation[0m[2m
     
     Let me start[0m[2m by reading the files[0m[2m:[0m[2m
     - `app/main[0m[2m.py` - the[0m[2m main application file with[0m[2m existing[0m[2m endpoints
     - `[0m[2mapp/database.py`[0m[2m - the in-memory[0m[2m database[0m[2m
     - Any[0m[2m other relevant files in[0m[2m the `[0m[2mapp/` directory[0m[2m
     
     This is a[0m[2m straightforward implementation[0m[2m task,[0m[2m so it[0m[2m's on[0m[2m the FAST[0m[2m PATH.[0m[2m
  üß† I[0m[2m'll implement[0m[2m the remaining[0m[2m CRUD endpoints in the[0m[2m Todo app. Let[0m[2m me first examine the[0m[2m existing code to[0m[2m understand the patterns.[0m[2m{"path":"app/database.py"}[0m[2m{"path":"app"}[0m[2m
  üß∞ call_binm9rl5 | ReadReadLS {"path":"app/main.py"}{"path":"app/database.py"}{"path":"app"}
[0m[2m
  üî† call_binm9rl5 | Return Unknown tool name: 'ReadReadLS'. Available tools: 'Bash', 'AnalyzeCode', 'LS', 'Glob', 'Read', 'ReadMany', 'Write', 'WriteMany', 'Edit', 'Grep', 'AnalyzeFile', 'SearchInternet', 'OpenWebPage', 'ListZrbTasks', 'RunZrbTask', 'ActivateSkill', 'DelegateToAgent', 'ReadContextualNote', 'ReadLongTermNote', 'WriteContextualNote', 'WriteLongTermNote'
[0m[32m260215 10:02:43.751 3/3   üê∂ chat-process ‚¨§ [0m [1;31m[ERROR] Attempt 3/3 failed: status_code: 400, model_name: glm-4.7:cloud, body: {'message': 'invalid tool call arguments', 'type': 'invalid_request_error', 'param': None, 'code': None}[0m
[32m260215 10:02:43.751 3/3   üê∂ chat-process ‚¨§ [0m [1;31m[ERROR] Marked as permanently failed[0m
[32m260215 10:02:43.766 3/3   üê∂ chat-process ‚¨§ [0m [1;31m[ERROR] Traceback (most recent call last):
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/models/openai.py", line 706, in _completions_create
    return await self.client.chat.completions.create(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<29 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py", line 2676, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/openai/_base_client.py", line 1884, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/openai/_base_client.py", line 1669, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': 'invalid tool call arguments', 'type': 'invalid_request_error', 'param': None, 'code': None}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 178, in execute_action_with_retry
    result = await run_async(task._exec_action(ctx))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/llm/task/llm_task.py", line 255, in _exec_action
    output, new_history = await run_agent(
                          ^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/src/zrb/llm/agent/run_agent.py", line 189, in run_agent
    async for event in agent.run_stream_events(
    ...<11 lines>...
            await effective_event_handler(event)
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/agent/abstract.py", line 974, in _run_stream_events
    result = await task
             ^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/agent/abstract.py", line 949, in run_agent
    return await self.run(
           ^^^^^^^^^^^^^^^
    ...<15 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/agent/abstract.py", line 278, in run
    async with node.stream(agent_run.ctx) as stream:
               ~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/.pyenv/versions/3.13.0/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/_agent_graph.py", line 467, in stream
    async with ctx.deps.model.request_stream(
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        message_history, model_settings, model_request_parameters, run_context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as streamed_response:
    ^
  File "/Users/gofrendigunawan/.pyenv/versions/3.13.0/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/models/openai.py", line 644, in request_stream
    response = await self._completions_create(messages, True, model_settings_cast, model_request_parameters)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/models/openai.py", line 741, in _completions_create
    raise ModelHTTPError(status_code=status_code, model_name=self.model_name, body=e.body) from e
pydantic_ai.exceptions.ModelHTTPError: status_code: 400, model_name: glm-4.7:cloud, body: {'message': 'invalid tool call arguments', 'type': 'invalid_request_error', 'param': None, 'code': None}
[0m
[32m260215 10:02:43.782 1/1   üê∂ chat ‚¨§ [0m [1;31m[ERROR] Attempt 1/1 failed: status_code: 400, model_name: glm-4.7:cloud, body: {'message': 'invalid tool call arguments', 'type': 'invalid_request_error', 'param': None, 'code': None}[0m
[32m260215 10:02:43.782 1/1   üê∂ chat ‚¨§ [0m [1;31m[ERROR] Marked as permanently failed[0m
[32m260215 10:02:43.789 1/1   üê∂ chat ‚¨§ [0m [1;31m[ERROR] Traceback (most recent call last):
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/models/openai.py", line 706, in _completions_create
    return await self.client.chat.completions.create(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<29 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py", line 2676, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/openai/_base_client.py", line 1884, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/openai/_base_client.py", line 1669, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': 'invalid tool call arguments', 'type': 'invalid_request_error', 'param': None, 'code': None}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 178, in execute_action_with_retry
    result = await run_async(task._exec_action(ctx))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/llm/task/llm_chat_task.py", line 379, in _exec_action
    return await self._run_non_interactive_session(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/src/zrb/llm/task/llm_chat_task.py", line 579, in _run_non_interactive_session
    return await llm_task_core.async_run(session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base_task.py", line 245, in async_run
    return await run_task_async(
           ^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/lifecycle.py", line 91, in run_task_async
    result = await task.exec_root_tasks(session)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base_task.py", line 254, in exec_root_tasks
    return await execute_root_tasks(self, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/lifecycle.py", line 129, in execute_root_tasks
    await asyncio.gather(*root_task_coros)
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base_task.py", line 257, in exec_chain
    return await execute_task_chain(self, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 21, in execute_task_chain
    result = await execute_task_action(task, session)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 53, in execute_task_action
    return await run_async(execute_action_until_ready(task, session))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 85, in execute_action_until_ready
    result = await run_async(execute_action_with_retry(task, session))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 215, in execute_action_with_retry
    raise e  # Re-raise the exception after handling fallbacks
    ^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 178, in execute_action_with_retry
    result = await run_async(task._exec_action(ctx))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/llm/task/llm_task.py", line 255, in _exec_action
    output, new_history = await run_agent(
                          ^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/src/zrb/llm/agent/run_agent.py", line 189, in run_agent
    async for event in agent.run_stream_events(
    ...<11 lines>...
            await effective_event_handler(event)
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/agent/abstract.py", line 974, in _run_stream_events
    result = await task
             ^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/agent/abstract.py", line 949, in run_agent
    return await self.run(
           ^^^^^^^^^^^^^^^
    ...<15 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/agent/abstract.py", line 278, in run
    async with node.stream(agent_run.ctx) as stream:
               ~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/.pyenv/versions/3.13.0/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/_agent_graph.py", line 467, in stream
    async with ctx.deps.model.request_stream(
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        message_history, model_settings, model_request_parameters, run_context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as streamed_response:
    ^
  File "/Users/gofrendigunawan/.pyenv/versions/3.13.0/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/models/openai.py", line 644, in request_stream
    response = await self._completions_create(messages, True, model_settings_cast, model_request_parameters)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/models/openai.py", line 741, in _completions_create
    raise ModelHTTPError(status_code=status_code, model_name=self.model_name, body=e.body) from e
pydantic_ai.exceptions.ModelHTTPError: status_code: 400, model_name: glm-4.7:cloud, body: {'message': 'invalid tool call arguments', 'type': 'invalid_request_error', 'param': None, 'code': None}
[0m
[2mTo run again:[0m [1;33mzrb chat --message "Our Todo app is moving to a more modular structure, but we haven't finished the CRUD logic.

Please implement the remaining endpoints in `app/main.py`:
1. **POST /todos**: Add a new todo. Handle ID generation.
2. **PUT /todos/{todo_id}**: Update an existing todo.
3. **DELETE /todos/{todo_id}**: Remove a todo.

The app uses an in-memory database in `app/database.py`. Make sure your changes follow the existing patterns and use the correct Pydantic models." --model ollama:glm-4.7:cloud --session "" --yolo true --attach "" --interactive false[0m
Traceback (most recent call last):
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/models/openai.py", line 706, in _completions_create
    return await self.client.chat.completions.create(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<29 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py", line 2676, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/openai/_base_client.py", line 1884, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/openai/_base_client.py", line 1669, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': 'invalid tool call arguments', 'type': 'invalid_request_error', 'param': None, 'code': None}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/gofrendigunawan/zrb/.venv/bin/zrb", line 6, in <module>
    sys.exit(serve_cli())
             ~~~~~~~~~^^
  File "/Users/gofrendigunawan/zrb/src/zrb/__main__.py", line 68, in serve_cli
    raise e
  File "/Users/gofrendigunawan/zrb/src/zrb/__main__.py", line 61, in serve_cli
    cli.run(sys.argv[1:])
    ~~~~~~~^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/runner/cli.py", line 54, in run
    result = self._run_task(node, str_args, task_str_kwargs)
  File "/Users/gofrendigunawan/zrb/src/zrb/runner/cli.py", line 89, in _run_task
    return task.run(
           ~~~~~~~~^
        Session(shared_ctx=shared_ctx, root_group=self), str_kwargs=run_kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base_task.py", line 229, in run
    return asyncio.run(
           ~~~~~~~~~~~^
        run_and_cleanup(
        ^^^^^^^^^^^^^^^^
    ...<5 lines>...
        )
        ^
    )
    ^
  File "/Users/gofrendigunawan/.pyenv/versions/3.13.0/lib/python3.13/asyncio/runners.py", line 194, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/Users/gofrendigunawan/.pyenv/versions/3.13.0/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/gofrendigunawan/.pyenv/versions/3.13.0/lib/python3.13/asyncio/base_events.py", line 721, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/lifecycle.py", line 34, in run_and_cleanup
    result = await main_task_coro
             ^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/lifecycle.py", line 91, in run_task_async
    result = await task.exec_root_tasks(session)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base_task.py", line 254, in exec_root_tasks
    return await execute_root_tasks(self, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/lifecycle.py", line 129, in execute_root_tasks
    await asyncio.gather(*root_task_coros)
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base_task.py", line 257, in exec_chain
    return await execute_task_chain(self, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 21, in execute_task_chain
    result = await execute_task_action(task, session)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 53, in execute_task_action
    return await run_async(execute_action_until_ready(task, session))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 85, in execute_action_until_ready
    result = await run_async(execute_action_with_retry(task, session))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 215, in execute_action_with_retry
    raise e  # Re-raise the exception after handling fallbacks
    ^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 178, in execute_action_with_retry
    result = await run_async(task._exec_action(ctx))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/llm/task/llm_chat_task.py", line 379, in _exec_action
    return await self._run_non_interactive_session(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/src/zrb/llm/task/llm_chat_task.py", line 579, in _run_non_interactive_session
    return await llm_task_core.async_run(session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base_task.py", line 245, in async_run
    return await run_task_async(
           ^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/lifecycle.py", line 91, in run_task_async
    result = await task.exec_root_tasks(session)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base_task.py", line 254, in exec_root_tasks
    return await execute_root_tasks(self, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/lifecycle.py", line 129, in execute_root_tasks
    await asyncio.gather(*root_task_coros)
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base_task.py", line 257, in exec_chain
    return await execute_task_chain(self, session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 21, in execute_task_chain
    result = await execute_task_action(task, session)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 53, in execute_task_action
    return await run_async(execute_action_until_ready(task, session))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 85, in execute_action_until_ready
    result = await run_async(execute_action_with_retry(task, session))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 215, in execute_action_with_retry
    raise e  # Re-raise the exception after handling fallbacks
    ^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/task/base/execution.py", line 178, in execute_action_with_retry
    result = await run_async(task._exec_action(ctx))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/util/run.py", line 19, in run_async
    return await value
           ^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/src/zrb/llm/task/llm_task.py", line 255, in _exec_action
    output, new_history = await run_agent(
                          ^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/src/zrb/llm/agent/run_agent.py", line 189, in run_agent
    async for event in agent.run_stream_events(
    ...<11 lines>...
            await effective_event_handler(event)
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/agent/abstract.py", line 974, in _run_stream_events
    result = await task
             ^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/agent/abstract.py", line 949, in run_agent
    return await self.run(
           ^^^^^^^^^^^^^^^
    ...<15 lines>...
    )
    ^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/agent/abstract.py", line 278, in run
    async with node.stream(agent_run.ctx) as stream:
               ~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/.pyenv/versions/3.13.0/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/_agent_graph.py", line 467, in stream
    async with ctx.deps.model.request_stream(
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        message_history, model_settings, model_request_parameters, run_context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as streamed_response:
    ^
  File "/Users/gofrendigunawan/.pyenv/versions/3.13.0/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/models/openai.py", line 644, in request_stream
    response = await self._completions_create(messages, True, model_settings_cast, model_request_parameters)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gofrendigunawan/zrb/.venv/lib/python3.13/site-packages/pydantic_ai/models/openai.py", line 741, in _completions_create
    raise ModelHTTPError(status_code=status_code, model_name=self.model_name, body=e.body) from e
pydantic_ai.exceptions.ModelHTTPError: status_code: 400, model_name: glm-4.7:cloud, body: {'message': 'invalid tool call arguments', 'type': 'invalid_request_error', 'param': None, 'code': None}
